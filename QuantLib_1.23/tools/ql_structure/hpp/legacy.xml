<?xml version="1.0" encoding="UTF-8"?>
<documents>
  <document index="1">
    <source>all.hpp</source>
    <document_content><![CDATA[/* This file is automatically generated; do not edit.     */
/* Add the files to be included into Makefile.am instead. */

#include <ql/legacy/libormarketmodels/all.hpp>
]]></document_content>
  </document>
  <document index="2">
    <source>libormarketmodels/all.hpp</source>
    <document_content><![CDATA[/* This file is automatically generated; do not edit.     */
/* Add the files to be included into Makefile.am instead. */

#include <ql/legacy/libormarketmodels/lfmcovarparam.hpp>
#include <ql/legacy/libormarketmodels/lfmcovarproxy.hpp>
#include <ql/legacy/libormarketmodels/lfmhullwhiteparam.hpp>
#include <ql/legacy/libormarketmodels/lfmprocess.hpp>
#include <ql/legacy/libormarketmodels/lfmswaptionengine.hpp>
#include <ql/legacy/libormarketmodels/liborforwardmodel.hpp>
#include <ql/legacy/libormarketmodels/lmconstwrappercorrmodel.hpp>
#include <ql/legacy/libormarketmodels/lmconstwrappervolmodel.hpp>
#include <ql/legacy/libormarketmodels/lmcorrmodel.hpp>
#include <ql/legacy/libormarketmodels/lmexpcorrmodel.hpp>
#include <ql/legacy/libormarketmodels/lmextlinexpvolmodel.hpp>
#include <ql/legacy/libormarketmodels/lmfixedvolmodel.hpp>
#include <ql/legacy/libormarketmodels/lmlinexpcorrmodel.hpp>
#include <ql/legacy/libormarketmodels/lmlinexpvolmodel.hpp>
#include <ql/legacy/libormarketmodels/lmvolmodel.hpp>

]]></document_content>
  </document>
  <document index="3">
    <source>libormarketmodels/lfmcovarparam.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lfmcovarparam.hpp
    \brief volatility & correlation function for libor forward model process
*/

#ifndef quantlib_libor_market_covariance_parameterization_hpp
#define quantlib_libor_market_covariance_parameterization_hpp

#include <ql/math/matrix.hpp>
#include <ql/utilities/null.hpp>

namespace QuantLib {

    //! %Libor market model parameterization
    /*! Brigo, Damiano, Mercurio, Fabio, Morini, Massimo, 2003,
        Different Covariance  Parameterizations of the Libor Market Model
        and Joint Caps/Swaptions Calibration
      (<http://www.exoticderivatives.com/Files/Papers/brigomercuriomorini.pdf>)
    */

    class LfmCovarianceParameterization {
      public:
        LfmCovarianceParameterization(Size size, Size factors)
        : size_(size), factors_(factors) {}
        virtual ~LfmCovarianceParameterization() = default;

        Size size() const { return size_; }
        Size factors() const { return factors_; }

        virtual Disposable<Matrix> diffusion(
                            Time t, const Array& x = Null<Array>()) const = 0;
        virtual Disposable<Matrix> covariance(
                            Time t, const Array& x = Null<Array>()) const;
        virtual Disposable<Matrix> integratedCovariance(
                            Time t, const Array& x = Null<Array>()) const;

      protected:
        const Size size_;
        const Size factors_;

      private:
        class Var_Helper;
    };

}


#endif

]]></document_content>
  </document>
  <document index="4">
    <source>libormarketmodels/lfmcovarproxy.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lfmcovarproxy.hpp
    \brief proxy for libor forward covariance parameterization
*/

#ifndef quantlib_libor_forward_market_covariance_proxy_hpp
#define quantlib_libor_forward_market_covariance_proxy_hpp

#include <ql/legacy/libormarketmodels/lfmcovarparam.hpp>
#include <ql/legacy/libormarketmodels/lmvolmodel.hpp>
#include <ql/legacy/libormarketmodels/lmcorrmodel.hpp>

namespace QuantLib {

    //! proxy for a libor forward model covariance parameterization

    class LfmCovarianceProxy : public LfmCovarianceParameterization {
      public:
        LfmCovarianceProxy(ext::shared_ptr<LmVolatilityModel> volaModel,
                           const ext::shared_ptr<LmCorrelationModel>& corrModel);

        ext::shared_ptr<LmVolatilityModel>  volatilityModel() const;
        ext::shared_ptr<LmCorrelationModel> correlationModel() const;

        Disposable<Matrix> diffusion(Time t, const Array& x = Null<Array>()) const override;
        Disposable<Matrix> covariance(Time t, const Array& x = Null<Array>()) const override;

        using LfmCovarianceParameterization::integratedCovariance;
        virtual Real integratedCovariance(
            Size i, Size j, Time t, const Array& x = Null<Array>()) const;

      protected:
        const ext::shared_ptr<LmVolatilityModel>  volaModel_;
        const ext::shared_ptr<LmCorrelationModel> corrModel_;

      private:
        class Var_Helper;
        friend class Var_Helper;
    };

}


#endif

]]></document_content>
  </document>
  <document index="5">
    <source>libormarketmodels/lfmhullwhiteparam.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lfmhullwhiteparam.hpp
    \brief libor market model parameterization based on Hull White
*/

#ifndef quantlib_libor_market_hull_white_parameterization_hpp
#define quantlib_libor_market_hull_white_parameterization_hpp

#include <ql/legacy/libormarketmodels/lfmprocess.hpp>
#include <ql/legacy/libormarketmodels/lfmcovarparam.hpp>

namespace QuantLib {

    //! %Libor market model parameterization based on Hull White paper
    /*! Hull, John, White, Alan, 1999, Forward Rate Volatilities, Swap Rate
        Volatilities and the Implementation of the Libor Market Model
        (<http://www.rotman.utoronto.ca/~amackay/fin/libormktmodel2.pdf>)

        \test the correctness is tested by Monte-Carlo reproduction of
              caplet & ratchet npvs and comparison with Black pricing.
    */

    class LfmHullWhiteParameterization : public LfmCovarianceParameterization {
      public:
        LfmHullWhiteParameterization(
            const ext::shared_ptr<LiborForwardModelProcess> & process,
            const ext::shared_ptr<OptionletVolatilityStructure> & capletVol,
            const Matrix& correlation = Matrix(), Size factors = 1);

        Disposable<Matrix> diffusion(Time t, const Array& x = Null<Array>()) const override;
        Disposable<Matrix> covariance(Time t, const Array& x = Null<Array>()) const override;
        Disposable<Matrix> integratedCovariance(Time t,
                                                const Array& x = Null<Array>()) const override;

      protected:
        Size nextIndexReset(Time t) const;

        Matrix diffusion_, covariance_;
        std::vector<Time> fixingTimes_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="6">
    <source>libormarketmodels/lfmprocess.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lfmprocess.hpp
    \brief stochastic process of a libor forward model
*/

#ifndef quantlib_libor_forward_model_process_hpp
#define quantlib_libor_forward_model_process_hpp

#include <ql/cashflow.hpp>
#include <ql/indexes/iborindex.hpp>
#include <ql/termstructures/volatility/optionlet/optionletvolatilitystructure.hpp>
#include <ql/stochasticprocess.hpp>
#include <ql/legacy/libormarketmodels/lfmcovarparam.hpp>

namespace QuantLib {

    //! libor-forward-model process
    /*! stochastic process of a libor forward model using the
        rolling forward measure incl. predictor-corrector step

        References:

        Glasserman, Paul, 2004, Monte Carlo Methods in Financial Engineering,
        Springer, Section 3.7

        Antoon Pelsser, 2000, Efficient Methods for Valuing Interest Rate
        Derivatives, Springer, 8

        Hull, John, White, Alan, 1999, Forward Rate Volatilities, Swap Rate
        Volatilities and the Implementation of the Libor Market Model
        (<http://www.rotman.utoronto.ca/~amackay/fin/libormktmodel2.pdf>)

        \test the correctness is tested by Monte-Carlo reproduction of
              caplet & ratchet NPVs and comparison with Black pricing.

        \warning this class does not work correctly with Visual C++ 6.

        \ingroup processes
    */
    class LiborForwardModelProcess : public StochasticProcess {
      public:
        LiborForwardModelProcess(Size size, ext::shared_ptr<IborIndex> index);

        Disposable<Array> initialValues() const override;
        Disposable<Array> drift(Time t, const Array& x) const override;
        Disposable<Matrix> diffusion(Time t, const Array& x) const override;
        Disposable<Matrix> covariance(Time t0, const Array& x0, Time dt) const override;
        Disposable<Array> apply(const Array& x0, const Array& dx) const override;

        // implements the predictor-corrector schema
        Disposable<Array> evolve(Time t0, const Array& x0, Time dt, const Array& dw) const override;

        Size size() const override;
        Size factors() const override;

        ext::shared_ptr<IborIndex> index() const;
        Leg cashFlows(
                                                     Real amount = 1.0) const;

        void setCovarParam(
               const ext::shared_ptr<LfmCovarianceParameterization>& param);
        ext::shared_ptr<LfmCovarianceParameterization> covarParam() const;

        // convenience support methods
        Size nextIndexReset(Time t) const;
        const std::vector<Time> & fixingTimes() const;
        const std::vector<Date> & fixingDates() const;
        const std::vector<Time> & accrualStartTimes() const;
        const std::vector<Time> & accrualEndTimes() const;

        std::vector<DiscountFactor> discountBond(
                                       const std::vector<Rate> & rates) const;

      private:
        Size size_;

        const ext::shared_ptr<IborIndex> index_;
        ext::shared_ptr<LfmCovarianceParameterization> lfmParam_;

        Array initialValues_;

        std::vector<Time> fixingTimes_;
        std::vector<Date> fixingDates_;
        std::vector<Time> accrualStartTimes_;
        std::vector<Time> accrualEndTimes_;
        std::vector<Time> accrualPeriod_;

        mutable Array m1, m2;
    };

}


#endif
]]></document_content>
  </document>
  <document index="7">
    <source>libormarketmodels/lfmswaptionengine.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lfmswaptionengine.hpp
    \brief libor forward model swaption engine based on black formula
*/

#ifndef quantlib_libor_forward_model_swaption_engine_hpp
#define quantlib_libor_forward_model_swaption_engine_hpp

#include <ql/instruments/swaption.hpp>
#include <ql/pricingengines/genericmodelengine.hpp>
#include <ql/legacy/libormarketmodels/liborforwardmodel.hpp>

namespace QuantLib {

    //! %Libor forward model swaption engine based on Black formula
    /*! \ingroup swaptionengines */
    class LfmSwaptionEngine : public GenericModelEngine<LiborForwardModel,
                                                        Swaption::arguments,
                                                        Swaption::results> {
      public:
        LfmSwaptionEngine(const ext::shared_ptr<LiborForwardModel>& model,
                          Handle<YieldTermStructure> discountCurve);
        void calculate() const override;

      private:
        Handle<YieldTermStructure> discountCurve_;
    };

}


#endif
]]></document_content>
  </document>
  <document index="8">
    <source>libormarketmodels/liborforwardmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file liborforwardmodel.hpp
    \brief libor forward model incl. exact cap pricing
           Rebonato formula to approximate swaption prices.
*/

#ifndef quantlib_libor_forward_model_hpp
#define quantlib_libor_forward_model_hpp

#include <ql/legacy/libormarketmodels/lfmprocess.hpp>
#include <ql/termstructures/volatility/swaption/swaptionvolmatrix.hpp>
#include <ql/termstructures/volatility/optionlet/capletvariancecurve.hpp>
#include <ql/models/model.hpp>
#include <ql/legacy/libormarketmodels/lfmcovarproxy.hpp>

namespace QuantLib {

    //! %Libor forward model
    /*! References:

    Stefan Weber, 2005, Efficient Calibration for Libor Market Models,
    (<http://workshop.mathfinance.de/2005/papers/weber/slides.pdf>)

    Damiano Brigo, Fabio Mercurio, Massimo Morini, 2003,
    Different Covariance Parameterizations of Libor Market Model and Joint
    Caps/Swaptions Calibration,
    (<http://www.business.uts.edu.au/qfrc/conferences/qmf2001/Brigo_D.pdf>

    \test the correctness is tested using Monte-Carlo Simulation to
          reproduce swaption npvs, model calibration and exact cap pricing
    */

    class LiborForwardModel : public CalibratedModel, public AffineModel {
      public:
        LiborForwardModel(
            const ext::shared_ptr<LiborForwardModelProcess> & process,
            const ext::shared_ptr<LmVolatilityModel>  & volaModel,
            const ext::shared_ptr<LmCorrelationModel> & corrModel);

        Rate S_0(Size alpha, Size beta) const;
        // approx. swaption matrix using Rebonato's approx.
        // fix and floating leg have the same frequency
        virtual ext::shared_ptr<SwaptionVolatilityMatrix>
            getSwaptionVolatilityMatrix() const;

        DiscountFactor discount(Time t) const override;
        Real discountBond(Time now, Time maturity, Array factors) const override;
        Real discountBondOption(Option::Type type,
                                Real strike,
                                Time maturity,
                                Time bondMaturity) const override;

        void setParams(const Array& params) override;

      protected:
        Disposable<Array> w_0(Size alpha, Size beta) const;

        std::vector<Real> f_;
        std::vector<Time> accrualPeriod_;

        const ext::shared_ptr<LfmCovarianceProxy> covarProxy_;
        const ext::shared_ptr<LiborForwardModelProcess> process_;

        mutable ext::shared_ptr<SwaptionVolatilityMatrix> swaptionVola;
    };

}


#endif

]]></document_content>
  </document>
  <document index="9">
    <source>libormarketmodels/lmconstwrappercorrmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmconstwrappercorrmodel.hpp
    \brief const wrapper for correlation model for libor market models
*/

#ifndef quantlib_libor_forward_const_wrapper_correlation_model_hpp
#define quantlib_libor_forward_const_wrapper_correlation_model_hpp

#include <ql/legacy/libormarketmodels/lmcorrmodel.hpp>

namespace QuantLib {

    class LmConstWrapperCorrelationModel : public LmCorrelationModel {
      public:
        LmConstWrapperCorrelationModel(
            const ext::shared_ptr<LmCorrelationModel> & corrModel)
        : LmCorrelationModel(corrModel->size(), 0),
          corrModel_(corrModel) {
        }

        Size factors() const override { return corrModel_->factors(); }

        Disposable<Matrix> correlation(Time t, const Array& x = Null<Array>()) const override {
            return corrModel_->correlation(t, x);
        }
        Disposable<Matrix> pseudoSqrt(Time t, const Array& x = Null<Array>()) const override {
            return corrModel_->pseudoSqrt(t, x);
        }
        Real correlation(Size i, Size j, Time t, const Array& x = Null<Array>()) const override {
            return corrModel_->correlation(i, j, t, x);
        }
        bool isTimeIndependent() const override { return corrModel_->isTimeIndependent(); }

      protected:
        void generateArguments() override {}

        const ext::shared_ptr<LmCorrelationModel> corrModel_;
    };

}


#endif


]]></document_content>
  </document>
  <document index="10">
    <source>libormarketmodels/lmconstwrappervolmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmconstwrappervolmodel.hpp
    \brief const wrapper for a volatility model for libor market models
*/

#ifndef quantlib_libor_market_const_wrapper_volatility_model_hpp
#define quantlib_libor_market_const_wrapper_volatility_model_hpp

#include <ql/legacy/libormarketmodels/lmvolmodel.hpp>

namespace QuantLib {

    //! caplet const volatility model
    class LmConstWrapperVolatilityModel : public LmVolatilityModel {
      public:
        explicit LmConstWrapperVolatilityModel(
            const ext::shared_ptr<LmVolatilityModel> & volaModel)
        : LmVolatilityModel(volaModel->size(), 0),
          volaModel_(volaModel) {
        }

        Disposable<Array> volatility(Time t, const Array& x = Null<Array>()) const override {
            return volaModel_->volatility(t, x);
        }
        Volatility volatility(
            Size i, Time t, const Array& x = Null<Array>()) {
            return volaModel_->volatility(i, t, x);
        }
        Real
        integratedVariance(Size i, Size j, Time u, const Array& x = Null<Array>()) const override {
            return volaModel_->integratedVariance(i, j, u, x);
        }

      protected:
        const ext::shared_ptr<LmVolatilityModel> volaModel_;

      private:
        using LmVolatilityModel::volatility;
        void generateArguments() override {}
    };

}


#endif


]]></document_content>
  </document>
  <document index="11">
    <source>libormarketmodels/lmcorrmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmcorrmodel.hpp
    \brief correlation model for libor market models
*/

#ifndef quantlib_libor_forward_correlation_model_hpp
#define quantlib_libor_forward_correlation_model_hpp

#include <ql/math/array.hpp>
#include <ql/math/matrix.hpp>
#include <ql/models/parameter.hpp>
#include <ql/utilities/null.hpp>

namespace QuantLib {

    //! %libor forward correlation model
    class LmCorrelationModel {
      public:
        LmCorrelationModel(Size size, Size nArguments);
        virtual ~LmCorrelationModel() = default;

        virtual Size size() const;
        virtual Size factors() const;

        std::vector<Parameter>& params();
        void setParams(const std::vector<Parameter> & arguments);

        virtual Disposable<Matrix> correlation(
            Time t, const Array& x = Null<Array>()) const = 0;
        virtual Disposable<Matrix> pseudoSqrt(
            Time t, const Array& x = Null<Array>()) const;
        virtual Real correlation(
            Size i, Size j, Time t, const Array& x = Null<Array>()) const;
        virtual bool isTimeIndependent() const;


    protected:
        virtual void generateArguments() = 0;

        const Size size_;

        std::vector<Parameter> arguments_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="12">
    <source>libormarketmodels/lmexpcorrmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmexpcorrmodel.hpp
    \brief exponential correlation model for libor market models
*/

#ifndef quantlib_libor_forward_exp_correlation_model_hpp
#define quantlib_libor_forward_exp_correlation_model_hpp

#include <ql/legacy/libormarketmodels/lmcorrmodel.hpp>

namespace QuantLib {

    //! exponential correlation model
    /*! This class describes a exponential correlation model

        \f[
        \rho_{i,j}=e^{(-\beta \|i-j\|)}
        \f]

        References:

        Damiano Brigo, Fabio Mercurio, Massimo Morini, 2003,
        Different Covariance Parameterizations of Libor Market Model and Joint
        Caps/Swaptions Calibration,
        (<http://www.business.uts.edu.au/qfrc/conferences/qmf2001/Brigo_D.pdf>)
    */
    class LmExponentialCorrelationModel : public LmCorrelationModel {
      public:
        LmExponentialCorrelationModel(Size size, Real rho);

        Disposable<Matrix> correlation(Time t, const Array& x = Null<Array>()) const override;
        Disposable<Matrix> pseudoSqrt(Time t, const Array& x = Null<Array>()) const override;
        Real correlation(Size i, Size j, Time t, const Array& x) const override;
        bool isTimeIndependent() const override;

      protected:
        void generateArguments() override;

      private:
        Matrix corrMatrix_, pseudoSqrt_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="13">
    <source>libormarketmodels/lmextlinexpvolmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmextlinexpvolmodel.hpp
    \brief volatility model for libor market models
*/

#ifndef quantlib_libor_market_ext_linear_exp_volatility_model_hpp
#define quantlib_libor_market_ext_linear_exp_volatility_model_hpp

#include <ql/legacy/libormarketmodels/lmlinexpvolmodel.hpp>

namespace QuantLib {

    //! extended linear exponential volatility model
    /*! This class describes an extended linear-exponential volatility model

        \f[
        \sigma_i(t)=k_i*((a*(T_{i}-t)+d)*e^{-b(T_{i}-t)}+c)
        \f]

        References:

        Damiano Brigo, Fabio Mercurio, Massimo Morini, 2003,
        Different Covariance Parameterizations of Libor Market Model and Joint
        Caps/Swaptions Calibration,
        (<http://www.business.uts.edu.au/qfrc/conferences/qmf2001/Brigo_D.pdf>)
    */

    class LmExtLinearExponentialVolModel
        : public LmLinearExponentialVolatilityModel {
      public:
        LmExtLinearExponentialVolModel(const std::vector<Time>& fixingTimes,
                                       Real a, Real b, Real c, Real d);

        Disposable<Array> volatility(Time t, const Array& x = Null<Array>()) const override;
        Volatility volatility(Size i, Time t, const Array& x = Null<Array>()) const override;

        Real
        integratedVariance(Size i, Size j, Time u, const Array& x = Null<Array>()) const override;
    };

}


#endif

]]></document_content>
  </document>
  <document index="14">
    <source>libormarketmodels/lmfixedvolmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmfixedvolmodel.hpp
    \brief model of constant volatilities for libor market models
*/

#ifndef quantlib_libor_market_fixed_volatility_model_hpp
#define quantlib_libor_market_fixed_volatility_model_hpp

#include <ql/legacy/libormarketmodels/lmvolmodel.hpp>

namespace QuantLib {

    class LmFixedVolatilityModel : public LmVolatilityModel {
      public:
        LmFixedVolatilityModel(Array volatilities, const std::vector<Time>& startTimes);

        Disposable<Array> volatility(Time t, const Array& x = Null<Array>()) const override;
        Volatility volatility(Size i, Time t, const Array& x) const override;

      private:
        void generateArguments() override;

        const Array volatilities_;
        const std::vector<Time> startTimes_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="15">
    <source>libormarketmodels/lmlinexpcorrmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmlinexpcorrmodel.hpp
    \brief exponential correlation model for libor market models
*/

#ifndef quantlib_libor_forward_linear_exp_correlation_model_hpp
#define quantlib_libor_forward_linear_exp_correlation_model_hpp

#include <ql/legacy/libormarketmodels/lmcorrmodel.hpp>

namespace QuantLib {

    //! %linear exponential correlation model
    /*! This class describes a exponential correlation model

        \f[
        \rho_{i,j}=rho + (1-rho)*e^{(-\beta \|i-j\|)}
        \f]

        References:

        Damiano Brigo, Fabio Mercurio, Massimo Morini, 2003,
        Different Covariance Parameterizations of Libor Market Model and Joint
        Caps/Swaptions Calibration,
        (<http://www.business.uts.edu.au/qfrc/conferences/qmf2001/Brigo_D.pdf>)
    */
    class LmLinearExponentialCorrelationModel : public LmCorrelationModel {
      public:
        LmLinearExponentialCorrelationModel(Size size, Real rho, Real beta,
                                            Size factors = Null<Size>());

        Disposable<Matrix> correlation(Time t, const Array& x = Null<Array>()) const override;
        Disposable<Matrix> pseudoSqrt(Time t, const Array& x = Null<Array>()) const override;
        Real correlation(Size i, Size j, Time t, const Array& x) const override;

        Size factors() const override;
        bool isTimeIndependent() const override;

      protected:
        void generateArguments() override;

      private:
        Matrix corrMatrix_, pseudoSqrt_;
        const Size factors_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="16">
    <source>libormarketmodels/lmlinexpvolmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmlinexpvolmodel.hpp
    \brief volatility model for libor market models
*/

#ifndef quantlib_libor_market_linear_exp_volatility_model_hpp
#define quantlib_libor_market_linear_exp_volatility_model_hpp

#include <ql/legacy/libormarketmodels/lmvolmodel.hpp>

namespace QuantLib {

    //! %linear exponential volatility model
    /*! This class describes a linear-exponential volatility model

        \f[
        \sigma_i(t)=(a*(T_{i}-t)+d)*e^{-b(T_{i}-t)}+c
        \f]

        References:

        Damiano Brigo, Fabio Mercurio, Massimo Morini, 2003,
        Different Covariance Parameterizations of Libor Market Model and Joint
        Caps/Swaptions Calibration,
        (<http://www.business.uts.edu.au/qfrc/conferences/qmf2001/Brigo_D.pdf>)
    */

    class LmLinearExponentialVolatilityModel : public LmVolatilityModel {
      public:
        LmLinearExponentialVolatilityModel(
                                         const std::vector<Time>& fixingTimes,
                                         Real a, Real b, Real c, Real d);

        Disposable<Array> volatility(Time t, const Array& x = Null<Array>()) const override;
        Volatility volatility(Size i, Time t, const Array& x = Null<Array>()) const override;

        Real
        integratedVariance(Size i, Size j, Time u, const Array& x = Null<Array>()) const override;

      private:
        void generateArguments() override;
        const std::vector<Time> fixingTimes_;
    };

}


#endif

]]></document_content>
  </document>
  <document index="17">
    <source>libormarketmodels/lmvolmodel.hpp</source>
    <document_content><![CDATA[/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */

/*
 Copyright (C) 2005, 2006 Klaus Spanderen

 This file is part of QuantLib, a free-software/open-source library
 for financial quantitative analysts and developers - http://quantlib.org/

 QuantLib is free software: you can redistribute it and/or modify it
 under the terms of the QuantLib license.  You should have received a
 copy of the license along with this program; if not, please email
 <quantlib-dev@lists.sf.net>. The license is also available online at
 <http://quantlib.org/license.shtml>.

 This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.  See the license for more details.
*/

/*! \file lmvolmodel.hpp
    \brief volatility model for libor market models
*/

#ifndef quantlib_libor_market_volatility_model_hpp
#define quantlib_libor_market_volatility_model_hpp

#include <ql/models/parameter.hpp>
#include <ql/utilities/null.hpp>

namespace QuantLib {

    //! caplet volatility model
    class LmVolatilityModel {
      public:
        LmVolatilityModel(Size size, Size nArguments);
        virtual ~LmVolatilityModel() = default;

        Size size() const;

        std::vector<Parameter> & params();
        void setParams(const std::vector<Parameter> & arguments);

        virtual Disposable<Array> volatility(
             Time t, const Array& x = Null<Array>()) const = 0;
        virtual Volatility volatility(
             Size i, Time t, const Array& x = Null<Array>()) const;
        virtual Real integratedVariance(Size i, Size j, Time u,
                                        const Array& x = Null<Array>()) const;

      protected:
        const Size size_;
        std::vector<Parameter> arguments_;

      private:
        virtual void generateArguments() = 0;
    };

}


#endif

]]></document_content>
  </document>
</documents>